use fit::decoder::Decoder;
mod data;

#[test]
fn is_valid() {
    assert!(Decoder::new(&data::FIT_FILE_CHAINED).check_integrity())
}

#[test]
fn length_le_excepted() {
    assert!(!Decoder::new(&[
        0x0E, 0x10, 0xD9, 0x07, 0xFF, 0x00, 0x00, 0x00, 0x2E, 0x46, 0x49, 0x54, 0x91, 0x33, 0x00,
        0x00
    ])
    .check_integrity())
}

#[test]
fn file_crc_incorrect() {
    assert!(!Decoder::new(&[
        0x0E, 0x20, 0x8B, 0x08, 0x0B, 0x00, 0x00, 0x00, 0x2E, 0x46, 0x49, 0x54, 0xCC, 0xFB, 0x40,
        0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x01, 0x00, 0x00, 0x04, 0xFF, 0xFF
    ])
    .check_integrity())
}
